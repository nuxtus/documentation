import{_ as s,c as e,o as a,a as t}from"./app.b49a5621.js";const h=JSON.parse('{"title":"Using Nuxtus","description":"","frontmatter":{},"headers":[{"level":2,"title":"Permissions","slug":"permissions","link":"#permissions","children":[{"level":3,"title":"Setting up permissions","slug":"setting-up-permissions","link":"#setting-up-permissions","children":[]},{"level":3,"title":"Public API","slug":"public-api","link":"#public-api","children":[]}]},{"level":2,"title":"Creating Nuxt pages","slug":"creating-nuxt-pages","link":"#creating-nuxt-pages","children":[]},{"level":2,"title":"Using Directus data","slug":"using-directus-data","link":"#using-directus-data","children":[]},{"level":2,"title":"Deleting collections","slug":"deleting-collections","link":"#deleting-collections","children":[]}],"relativePath":"using-nuxtus.md","lastUpdated":1708655639000}'),n={name:"using-nuxtus.md"},o=t(`<h1 id="using-nuxtus" tabindex="-1">Using Nuxtus <a class="header-anchor" href="#using-nuxtus" aria-hidden="true">#</a></h1><p>Once Nuxtus is successfully <a href="/#installation">installed</a> you just need to start your Directus and Nuxt development servers.</p><p>If you are using the Nuxtus boilerplate then we have included a start script for you. From the root of your project simply run:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">npm start</span></span>
<span class="line"></span></code></pre></div><p>This will start both Directus and Nuxt and output will appear in the same console.</p><p>If you added Nuxtus to an existing project, you will need to continue using your current process for starting Directus and Nuxt.</p><h2 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-hidden="true">#</a></h2><p>Before you start generating pages it is important to understand and make a decision on the permissions to access your Directus data. Nuxtus will automatically retrieve Directus data via:</p><ol><li>No authentication: This requires that you change the &quot;read&quot; permissions for each collection you want a Nuxt page for to be added to the <a href="https://docs.directus.io/user-guide/user-management/permissions.html" target="_blank" rel="noreferrer">&quot;public&quot; role in Directus</a>. This requires no configuration in Nuxtus, but will require you to manually add each new collection to the &quot;Public&quot; role as they are created.</li><li>Static token authentication: If you don&#39;t want your data to be publicly accessible via an API you can provide Nuxtus with a <a href="https://docs.directus.io/user-guide/user-management/user-directory.html#edit-user-details" target="_blank" rel="noreferrer">static token</a> associated with a user that then has a role with the permissions to &quot;read&quot; collections you want to make available in Nuxt. This token is used by the Nuxt server either during render or build time depending on your project settings.</li></ol><blockquote><p>Note: A Directus admin account is also required, this is used for type generation during development only and is not required in production.</p></blockquote><h3 id="setting-up-permissions" tabindex="-1">Setting up permissions <a class="header-anchor" href="#setting-up-permissions" aria-hidden="true">#</a></h3><p>Once you have chosen a technique above, finalise your configuration as follows:</p><h3 id="public-api" tabindex="-1">Public API <a class="header-anchor" href="#public-api" aria-hidden="true">#</a></h3><p>No further set up is required. Just remember to assign each collection &quot;read&quot; permissions in the Public role as you create them otherwise Nuxtus will not be able to access the collection&#39;s contents.</p><h4 id="static-tokens" tabindex="-1">Static tokens <a class="header-anchor" href="#static-tokens" aria-hidden="true">#</a></h4><p>If using a user token create/select a Directus user and create a static token in <a href="http://localhost:8055/admin/users/" target="_blank" rel="noreferrer">their user profile</a>. Scroll down till you see &quot;token&quot; and click add. Do not forget to save the user with the new token.</p><p>Copy the created token into <code>/client/.env</code> file and change the auth setting to true:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">NUXTUS_DIRECTUS_AUTH=true</span></span>
<span class="line"><span style="color:#A6ACCD;">NUXTUS_DIRECTUS_STATIC_TOKEN=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">TOKEN HERE</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Then assign &quot;read&quot; permissions in this user&#39;s role as you create collections otherwise Nuxtus will not be able to access the collection&#39;s contents.</p><h2 id="creating-nuxt-pages" tabindex="-1">Creating Nuxt pages <a class="header-anchor" href="#creating-nuxt-pages" aria-hidden="true">#</a></h2><p>By default Nuxtus will automatically create Nuxt pages for you when you create a Directus <code>collection</code> thanks to the <a href="https://github.com/nuxtus/hook" target="_blank" rel="noreferrer">Nuxtus Directus plugin</a> and the <a href="https://github.com/nuxtus/nuxt-module" target="_blank" rel="noreferrer">Nuxtus Nuxt Module</a>.</p><ol><li>Ensure that both Directus and Nuxt are running.</li><li><a href="http://0.0.0.0:8055/admin/login" target="_blank" rel="noreferrer">Login to Directus</a> using the email/password you supplied during creation.</li><li>Create a Directus <code>collection</code> <a href="https://docs.directus.io/configuration/data-model/#creating-a-collection" target="_blank" rel="noreferrer">as normal</a>.</li><li>Nuxt pages will be created in <code>client/pages</code> and available at the Nuxtus URL <code>http://localhost:3000/&lt;collectionName&gt;</code>.</li></ol><blockquote><p>You can manually create pages from existing collections using the <a href="/cli.html">Nuxtus CLI</a></p></blockquote><h2 id="using-directus-data" tabindex="-1">Using Directus data <a class="header-anchor" href="#using-directus-data" aria-hidden="true">#</a></h2><p>Nuxtus will create a folder in your Nuxt <code>/pages/</code> folder with the name of your collection and <code>.vue</code> files inside.</p><p>Normal collections will generated with 2 files (a listing or index page and a display or details page), while singletons will contain one (a page displaying the singleton).</p><p>Regardless of the collection type, pages created by Nuxtus fetch Directus data in the Nuxt <code>setup</code> lifecycle hook using the Directus Javscript SDK.</p><blockquote><p>If you have the Directus API permissions set to public you can set <code>authDirectus</code> to false in <code>nuxt.config.ts</code></p></blockquote><p>In this example we have created a <code>posts</code> collection in Directus:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">script setup lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Query</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@directus/sdk</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">components</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../interfaces/nuxtus</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TestNuxtus</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">components</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">schemas</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ItemsTestNuxtus</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> $directus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> $readItems</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> $checkError </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useNuxtApp</span><span style="color:#A6ACCD;">()</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> query</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Query</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">components</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TestNuxtus</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Add your filters and query customisations here</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line highlighted"></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> error </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useAsyncData</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">TestNuxtus</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">null</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test_nuxtus</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">$directus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">$readItems</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test_nuxtus</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">query</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>Because OpenAPI schemas may have invalid TypeScript characters as names, the square brackets are a safe way to access every property.</p></blockquote><p>Once created you can edit the generated <code>.vue</code> files to customise the data retrieved using the Directus SDK.</p><p><a href="https://tailwindcss.com" target="_blank" rel="noreferrer">Tailwind CSS</a> is pre-installed so you can start styling pages straight out of the box.</p><h2 id="deleting-collections" tabindex="-1">Deleting collections <a class="header-anchor" href="#deleting-collections" aria-hidden="true">#</a></h2><p>Nuxtus will automatically remove any Nuxt pages it has created if you delete a corresponding collection in Directus.</p><p>You can also manually delete pages simply by deleting the folder in <code>/client/pages/</code> corresponding to the collection you wish to delete.</p>`,36),l=[o];function p(r,c,i,u,d,y){return a(),e("div",null,l)}const F=s(n,[["render",p]]);export{h as __pageData,F as default};
